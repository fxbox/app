!function(e){"use strict";function t(){s(b),b=c(f)}function r(e,t){var r=Object.getNotifier(e),n=j.get(r),o=j.get(r)[t];n[t]="undefined"==typeof o?1:o+1}function n(e,t){var r=Object.getNotifier(e),n=j.get(r),o=j.get(r)[t];n[t]=o>0?o-1:0}function o(e,t,r){var n=!1;if(t)for(var o=0,i=t.length;i>o;o++){var a=t[o];if(e[a]>0)return!1;a===r&&(n=!0)}return n}function i(e){if(!w.has(e)){var t=Object.create(m);Object.defineProperty(t,"__target",{value:e}),O.set(t,[]),j.set(t,{}),w.set(e,t)}return w.get(e)}function a(e,r){for(var n=Object.getNotifier(e),i=r.type,a=j.get(n),u=O.get(n),l=0,f=u.length;f>l;l++){var c=u[l],s=c.accept;if(o(a,s,i)){var p=c.callback,h=[];_.has(p)?h=_.get(p):_.set(p,h),h.push(r)}}t()}function u(e){if(!E.get(e)&&!_.has(e)){E["delete"](e);var t=d.indexOf(e);t!==-1&&d.splice(t,1)}}function l(e){var t=_.get(e);if(_["delete"](e),!t||0===t.length)return!1;try{e.call(void 0,t)}catch(r){}return u(e),!0}function f(){for(var e=d.slice(),t=!1,r=0,n=e.length;n>r;r++){var o=e[r];l(o)&&(t=!0)}return t}var c=e.setImmediate||e.msSetImmediate,s=e.clearImmediate||e.msClearImmediate;c||(c=function(e,t){return setTimeout(e,0,t)},s=function(e){clearTimeout(e)});var p;if("undefined"!=typeof WeakMap)p=WeakMap;else{var h="__weakmap:"+(1e9*Math.random()>>>0),y=(new Date).getTime()%1e9,v={};p=function(){this.name=h+(1e9*Math.random()>>>0)+(y++ +"__")},p.prototype={has:function(e){return e&&e.hasOwnProperty(this.name)},get:function(e){var t=e&&e[this.name];return t===v?void 0:t},set:function(e,t){Object.defineProperty(e,this.name,{value:"undefined"==typeof t?v:t,enumerable:!1,writable:!0,configurable:!0})},"delete":function(e){return delete e[this.name]}};var g=Object.getOwnPropertyNames;Object.defineProperty(Object,"getOwnPropertyNames",{value:function(e){return g(e).filter(function(e){return e.substr(0,h.length)!==h})},writable:!0,enumerable:!1,configurable:!0})}var b,d=[],m=Object.create(Object.prototype);Object.defineProperty(m,"notify",{value:function(e){var t=this;if(Object(t)!==t)throw new TypeError("this must be an Object, given "+t);if(t.__target){if(Object(e)!==e)throw new TypeError("changeRecord must be an Object, given "+e);var r=e.type;if("string"!=typeof r)throw new TypeError("changeRecord.type must be a string, given "+r);var n=O.get(t);if(n&&0!==n.length){var o=t.__target,i=Object.create(Object.prototype,{object:{value:o,writable:!1,enumerable:!0,configurable:!1}});for(var u in e)if("object"!==u){var l=e[u];Object.defineProperty(i,u,{value:l,writable:!1,enumerable:!0,configurable:!1})}Object.preventExtensions(i),a(t.__target,i)}}},writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(m,"performChange",{value:function(e,t){var o=this;if(Object(o)!==o)throw new TypeError("this must be an Object, given "+o);if(o.__target){if("string"!=typeof e)throw new TypeError("changeType must be a string given "+o);if("function"!=typeof t)throw new TypeError("changeFn must be a function, given "+t);r(o.__target,e);var i,u;try{u=t.call(void 0)}catch(l){i=l}if(n(o.__target,e),"undefined"!=typeof i)throw i;var f=O.get(o);if(0!==f.length){var c=o.__target,s=Object.create(Object.prototype,{object:{value:c,writable:!1,enumerable:!0,configurable:!1},type:{value:e,writable:!1,enumerable:!0,configurable:!1}});if("undefined"!=typeof u)for(var p in u)if("object"!==p&&"type"!==p){var h=u[p];Object.defineProperty(s,p,{value:h,writable:!1,enumerable:!0,configurable:!1})}Object.preventExtensions(s),a(o.__target,s)}}},writable:!0,enumerable:!1,configurable:!0});var w=new p,O=new p,j=new p,_=new p,E=new p;Object.defineProperties(Object,{observe:{value:function(e,t,r){if(Object(e)!==e)throw new TypeError("target must be an Object, given "+e);if("function"!=typeof t)throw new TypeError("observer must be a function, given "+t);if(Object.isFrozen(t))throw new TypeError("observer cannot be frozen");var n;if("undefined"==typeof r)n=["add","update","delete","reconfigure","setPrototype","preventExtensions"];else{if(Object(r)!==r)throw new TypeError("accept must be an object, given "+r);var o=r.length;if("number"!=typeof o||o>>>0!==o||1>o)throw new TypeError("the 'length' property of accept must be a positive integer, given "+o);var a=0;for(n=[];o>a;){var u=r[a];if("string"!=typeof u)throw new TypeError("accept must contains only string, given"+u);n.push(u),a++}}for(var l=i(e),f=O.get(l),c=0,s=f.length;s>c;c++)if(f[c].callback===t)return f[c].accept=n,e;return f.push({callback:t,accept:n}),d.indexOf(t)===-1&&d.push(t),E.has(t)?E.set(t,E.get(t)+1):E.set(t,1),e},writable:!0,configurable:!0},unobserve:{value:function(e,t){if(Object(e)!==e)throw new TypeError("target must be an Object, given "+e);if("function"!=typeof t)throw new TypeError("observer must be a function, given "+t);for(var r=i(e),n=O.get(r),o=0,a=n.length;a>o;o++)if(n[o].callback===t){n.splice(o,1),E.set(t,E.get(t)-1),u(t);break}return e},writable:!0,configurable:!0},deliverChangeRecords:{value:function(e){if("function"!=typeof e)throw new TypeError("callback must be a function, given "+e);for(;l(e););},writable:!0,configurable:!0},getNotifier:{value:function(e){if(Object(e)!==e)throw new TypeError("target must be an Object, given "+e);return Object.isFrozen(e)?null:i(e)},writable:!0,configurable:!0}})}("undefined"!=typeof global?global:this),function(e){"use strict";function t(e){return"undefined"!=typeof e&&("get"in e||"set"in e)}function r(e,t){for(var r=Object.getOwnPropertyDescriptor(e,t),n=Object.getPrototypeOf(e);"undefined"==typeof r&&null!==n;)r=Object.getOwnPropertyDescriptor(n,t),n=Object.getPrototypeOf(n);return r}function n(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function o(e,t){if(e=Number(e),isNaN(e)||!isFinite(e)||0>e||e%1!==0)throw new RangeError(t.replace("$",e));return e}function i(e,t,r){var o="_"+c++ +t;e.hasOwnProperty(t)&&Object.defineProperty(e,o,{value:r,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,t,{get:function(){return this[o]},set:function(e){if(!n(e,this[o])){var r=this[o];Object.defineProperty(this,o,{value:e,writable:!0,enumerable:!1,configurable:!0});var i=Object.getNotifier(this);i.notify({type:"update",name:t,oldValue:r})}},enumerable:!0,configurable:!0})}function a(e){if(0===arguments.length&&(e=0),arguments.length<=1&&"number"==typeof e){if(!(this instanceof a))return new a(e);this.length=e}else{if(!(this instanceof a))return a.fromArray(l(arguments));for(var t=0,r=arguments.length;r>t;t++)this[t]=arguments[t];this.length=arguments.length}}var u;u="undefined"!=typeof exports?exports:e.ObserveUtils={};var l=Function.call.bind(Array.prototype.slice),f=Function.call.bind(Array.prototype.map),c=0;u.defineObservableProperties=function(e,n){if(Object(e)!==e)throw new TypeError("target must be an Object, given "+e);for(n=l(arguments,1);n.length>0;){var o=n.shift(),a=r(e,o);if(!a||!t(a)){var u=a&&a.value;i(e,o,u)}}return e},a.observe=function(e,t){Object.observe(e,t,["add","update","delete","splice"])},a.unobserve=function(e,t){Object.unobserve(e,t)},a.fromArray=function(e){if(!Array.isArray(e))throw new Error;for(var t=new a,r=0,n=e.length;n>r;r++)t[r]=e[r];return t.length=e.length,t},Object.defineProperties(a.prototype,{_length:{value:0,enumerable:!1,configurable:!0,writable:!0},length:{get:function(){return this._length},set:function(e){e=o(e,"Invalid  list length : $");var t=Object.getNotifier(this),r=this._length,n=[],i=this;e!==r&&t.performChange("splice",function(){Object.defineProperty(i,"_length",{value:e,enumerable:!1,configurable:!0,writable:!0});var o;if(r>e){for(var a=e;r>a;a++)n.push(i[a]),i["delete"](a);o={index:e,removed:n,addedCount:0}}else o={index:r,removed:n,addedCount:e-r};return t.notify({type:"update",name:"length",oldValue:r}),o})},enumerable:!0,configurable:!0}}),a.prototype.toArray=function(){return l(this)},a.prototype.toString=function(){return this.toArray().toString()},a.prototype.toJSON=function(){return this.toArray()},a.prototype.set=function(e,t){e=o(e,"Invalid index : $");var r=Object.getNotifier(this),i=this.length,a=this;if(e>=i)r.performChange("splice",function(){return a[e]=t,r.notify({type:"add",name:e}),Object.defineProperty(a,"_length",{value:e+1,enumerable:!1,configurable:!0,writable:!0}),r.notify({type:"update",name:"length",oldValue:i}),{index:i,removed:[],addedCount:a.length-i}});else if(!n(t,this[e])){var u=this[e];this[e]=t,r.notify({type:"update",name:e,oldValue:u})}return t},a.prototype["delete"]=function(e){if(e=o(e,"Invalid index : $"),this.hasOwnProperty(e)){var t=this[e];if(delete this[e]){var r=Object.getNotifier(this);return r.notify({type:"delete",name:e,oldValue:t}),!0}}return!1},a.prototype.concat=function(e){return e=f(arguments,function(e){return e instanceof a?e.toArray():e}),a.fromArray(Array.prototype.concat.apply(this.toArray(),e))},a.prototype.join=function(e){return this.toArray().join(e)},a.prototype.pop=function(){if(Object(this)!==this)throw new TypeError("this mus be an object given : "+this);var e=o(this.length,"this must have a finite integer property 'length', given : $");if(0!==e){var t=e-1,r=this[t],n=Object.getNotifier(this),i=this;return n.performChange("splice",function(){return delete i[t],n.notify({type:"delete",name:t,oldValue:r}),Object.defineProperty(i,"_length",{value:t,enumerable:!1,configurable:!0,writable:!0}),n.notify({type:"update",name:"length",oldValue:e}),{index:t,removed:[r],addedCount:0}}),r}},a.prototype.push=function(){if(arguments.length>0){var e,t,r=arguments.length,n=arguments,o=this.length,i=Object.getNotifier(this),a=this;i.performChange("splice",function(){for(e=0;r>e;e++)t=o+e,a[t]=n[e],i.notify({type:"add",name:t});return Object.defineProperty(a,"_length",{value:o+r,enumerable:!1,configurable:!0,writable:!0}),i.notify({type:"update",name:"length",oldValue:o}),{index:o,removed:[],addedCount:r}})}return this.length},a.prototype.reverse=function(){for(var e=this.toArray(),t=e.slice().reverse(),r=0,n=t.length;n>r;r++)this.set(r,t[r]);return this},a.prototype.shift=function(){if(0!==this.length){var e=this.toArray(),t=e.shift(),r=Object.getNotifier(this),n=this,o=this.length;return r.performChange("splice",function(){for(var i=0,a=e.length;a>i;i++)n.set(i,e[i]);return n["delete"](o-1),Object.defineProperty(n,"_length",{value:o-1,enumerable:!1,configurable:!0,writable:!0}),r.notify({type:"update",name:"length",oldValue:o}),{index:0,removed:[t],addedCount:0}}),t}},a.prototype.slice=function(e,t){return a.fromArray(this.toArray().slice(e,t))},a.prototype.sort=function(e){for(var t=this.toArray(),r=t.slice().sort(e),n=0,o=r.length;o>n;n++)this.set(n,r[n]);return this},a.prototype.splice=function(){var e=[],t=arguments.length;if(t>0){var r,o,i=this.toArray(),u=Object.getNotifier(this),l=this.length,f=this,c=arguments[0];e=Array.prototype.splice.apply(i,arguments),u.performChange("splice",function(){for(r=0,o=i.length;o>r;r++){var a=f[r];n(a,i[r])||(f[r]=i[r],u.notify(r>=l?{type:"add",name:r}:{type:"update",name:r,oldValue:a}))}if(l!==i.length){if(l>i.length)for(r=i.length;l>r;r++)f["delete"](r);Object.defineProperty(f,"_length",{value:i.length,enumerable:!1,configurable:!0,writable:!0}),u.notify({type:"update",name:"length",oldValue:l})}return{index:c,removed:e,addedCount:t>=2?t-2:0}})}return a.fromArray(e)},a.prototype.unshift=function(){var e=arguments.length;if(e>0){var t=this.toArray(),r=Object.getNotifier(this),o=this.length,i=this;Array.prototype.unshift.apply(t,arguments),r.performChange("splice",function(){for(var a=0,u=t.length;u>a;a++){var l=i[a];n(l,t[a])||(i[a]=t[a],r.notify(a>=o?{type:"add",name:a}:{type:"update",name:a,oldValue:l}))}if(o!==t.length){if(o>t.length)for(a=t.length;o>a;a++)i["delete"](a);Object.defineProperty(i,"_length",{value:t.length,enumerable:!1,configurable:!0,writable:!0}),r.notify({type:"update",name:"length",oldValue:o})}return{index:0,removed:[],addedCount:e}})}return this.length},a.prototype.reduce=Array.prototype.reduce,a.prototype.reduceRight=Array.prototype.reduceRight,a.prototype.indexOf=Array.prototype.indexOf,a.prototype.lastIndexOf=Array.prototype.lastIndexOf,a.prototype.every=Array.prototype.every,a.prototype.filter=function(e,t){return a.fromArray(this.toArray().filter(e,t))},a.prototype.forEach=Array.prototype.forEach,a.prototype.map=function(e,t){return a.fromArray(this.toArray().map(e,t))},a.prototype.some=Array.prototype.some,u.List=a}(this),function(){var e,t;!function(r,n){"use strict";"function"==typeof e&&e.amd?e(n):"object"==typeof t?module.exports=n():r.Sanitizer=n()}(this,function(){"use strict";var e={_entity:/[&<>"'\/]/g,_entities:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#x2F;"},getEntity:function(t){return e._entities[t]},escapeHTML:function(t){for(var r="",n=0;n<t.length;n++)if(r+=t[n],n+1<arguments.length){var o=arguments[n+1]||"";r+=String(o).replace(e._entity,e.getEntity)}return r},createSafeHTML:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;r>o;o++)n[o-1]=arguments[o];var i=e.escapeHTML.apply(e,[t].concat(n));return{__html:i,toString:function(){return"[object WrappedHTMLObject]"},info:"This is a wrapped HTML object. See https://developer.mozilla.org/en-US/Firefox_OS/Security/Security_Automation for more."}},unwrapSafeHTML:function(){for(var e=arguments.length,t=new Array(e),r=0;e>r;r++)t[r]=arguments[r];var n=t.map(function(e){return e.__html});return n.join("")}};return e})}(window),define(["exports"],function(e){"use strict";function t(e,t){var r=e.target.dataset.action;t&&t[r]&&t[r](e)}function r(e){var r=e.target;i[e.type].forEach(function(n){n.scope.contains(r)&&r.matches(n.selector)&&(n.handler?n.handler.call(r,e):t(e,n.controller))})}var n=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),e.__proto__=t},o=function(){var e=function(e){var t=this;e=e||{};for(var r in e)this[r]=e[r];this.observableProperties={},Object.observe(this,function(e){e.forEach(function(e){var r=t.observableProperties[e.name];r&&r.forEach(function(t){t(e)})})})};return e.prototype.on=function(e,t){"function"==typeof t&&(this.observableProperties[e]||(ObserveUtils.defineObservableProperties(this,e),this.observableProperties[e]=[]),this.observableProperties[e].push(t))},e}();e.Model=o;var i={},a=function(){var e=function(e){e=e||{};for(var t in e)this[t]=e[t];this.el||(this.el=document.createElement("div"))};return e.prototype.init=function(e){return this.controller=e,this},e.prototype.layout=function(e){return e},e.prototype.render=function(e){var t="";if(e)if("object"==typeof e)for(var r in e){var n=e[r];t+=this.template(n)}else for(var o=0;o<e.length;o++){var n=e[o];t+=this.template(n)}else t=this.template();this.el.innerHTML=Sanitizer.escapeHTML(this.layout(t))},e.prototype.template=function(){return""},e.prototype.$=function(e){return this.el.querySelector(e)},e.prototype.$$=function(e){return this.el.querySelectorAll(e)},e.prototype.on=function(e,t,n,o){var a=this.controller;o=o||this.el,i[e]||(i[e]=[],window.addEventListener(e,r,!0)),i[e].push({selector:t,handler:n,controller:a,scope:o})},e.prototype.off=function(e,t,r){i[e]&&(i[e]=i[e].filter(function(e){return"function"==typeof r?e.selector!==t||e.handler!==r:e.selector!==t}))},e}();e.View=a;var u=function(){var e=function(e){e=e||{};for(var t in e)this[t]=e[t];this.view&&"function"==typeof this.view.init&&this.view.init(this)};return e.prototype.teardown=function(){},e.prototype.main=function(){},e}();e.Controller=u;var l=function(e){var t=function(t){return window.routingController?void console.error("Document can only contain one RoutingController"):(e.call(this),this._controllers=t,this.activeController=null,window.routingController=this,void window.addEventListener("hashchange",this.route.bind(this)))};return n(t,e),t.prototype.route=function(){var e=window.location.hash.slice(1);for(var t in this._controllers){var r=new RegExp("^"+t+"$"),n=e.match(r),o=this._controllers[t];if(n&&o){this.activeController&&this.activeController.teardown(),this.activeController=o,o.main.apply(o,n.slice(1));break}}},t.prototype.controller=function(e){return this._controllers[e]},t}(u);e.RoutingController=l;var f=function(){var e=function(){this._listeners={},this._dispatchedEvents={}};return e.prototype.addEventListener=function(e,t,r){var n=this;this._listeners[e]?this._listeners[e].push(t):this._listeners[e]=[t],r&&void 0!==this._dispatchedEvents[e]&&setTimeout(function(){t(n._dispatchedEvents[e])})},e.prototype.removeEventListener=function(e,t){if(this._listeners[e]){var r;this._listeners[e].find(function(e,n){return e===t&&(r=n),void 0!==r}),void 0!==r&&this._listeners[e].splice(r,1)}},e.prototype._dispatchEvent=function(e,t){this._listeners[e]&&(this._dispatchedEvents[e]=t||null,this._listeners[e].forEach(function(e){e(t)}))},e}();e.Service=f});
//# sourceMappingURL=mvc.js.map
